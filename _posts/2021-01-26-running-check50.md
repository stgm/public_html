---
layout: post
---
 
**Martijn Stegeman, University of Amsterdam**


## Step 1. Getting Started

If you have a working Python installation, please run `pip3` to install `check50`:

    pip3 install check50

You should now be able to run the tool:

    $ check50
    usage: check50 [-h] [-d] [--offline] [-l] [-o {ansi,json,html} [{ansi,json,html} ...]]
                   [--target TARGET [TARGET ...]] [--output-file FILE]
                   [--log-level {debug,info,warning,error}] [--ansi-log] [--no-download-checks]
                   [--no-install-dependencies] [-V] [--logout]
                   slug
    check50: error: the following arguments are required: slug

The reason that check50's complaining is that it needs a **slug**, a path to the checks that have to be run. These checks are usually hosted in a GitHub repository, which makes them easy to find. Below, we'll run a check for the slug `minprog/cs50x/2020/hello`. This is the check that lives in this location:

- On github.com
- In the organization `minprog` (you can use your personal organization!)
- In the repository `cs50x`
- In the branch `2020`
- In the folder `hello`

Let's run it:

    $ check50 minprog/cs50x/2020/hello -l
    Connecting......
    You seem to be missing these required files:
    hello.c
    You are currently in: ~/dev/public_html, did you perhaps intend another directory?

Again, check50 is complaining. This error is given because the check is programmed to work on the file `hello.c`. Check50 always runs checks on the files that are in the current directory! So if you, or your students, want to check a program, they have to `cd` into that directory.

But that's OK! Lets' create an empty file called `hello.c`. Let's see what `check50` says now:

    $ touch hello.c
    $ check50 minprog/cs50x/2020/hello -l
    Checking.................
    Results for minprog/cs50x/2020/hello generated by check50 v3.2.0
    :) hello.c exists.
    :( hello.c compiles.
        timed out while waiting for program to exit
    :| responds to name Zamyla.
        can't check until a frown turns upside down
    :| responds to name Doug.
        can't check until a frown turns upside down

Finally it works! Of course, your empty solution in `hello.c` wouldn't pass any checks. And indeed, check50 finds that it doesn't compile at all. In turn, check50 decides that none of the other checks should be run yet, but it does already show which checks those are.

## Step 2. What checks look like

Have a look at this [example check](https://github.com/minprog/cs50x/blob/2020/py/hello/__init__.py) for `hello.py`:

    import check50
    import uva.check50.py
    import re

    @check50.check()
    def exists():
        """hello.py exists."""
        check50.exists("hello.py")

    @check50.check(exists)
    def compiles():
        """hello.py compiles."""
        uva.check50.py.compile("hello.py")

    @check50.check(compiles)
    def prints_hello():
        """prints "hello, world\\n" """
        from re import match

        expected = "[Hh]ello, world!?\n"

        result = uva.check50.py.run("hello.py")

        if not re.search(expected, result.stdout):
            help = None
            if re.search(expected[:-1], result.stdout):
                help = r"did you forget a newline ('\n') at the end of your printf string?"
            raise check50.Mismatch("hello, world\n", result.stdout, help=help)

As you can see, there are three checks:

- `exists()`, which does nothing more than verify the presence of the correct source files used in the remainder of the checks

- `compiles()`, which feeds the source files into the check system. When checking C code, this will actually compile the files. When checking Python code, this will...

- `prints_hello()` is the real check here, and it's interesting because it's pretty lenient towards the student solution. This is achieved by using a regular expression that allows some variation in the output. The simplest implementation of this check would amount to the following:

        def prints_hello():
            if not ... :
                raise check50.Mismatch("hello, world\n", result.stdout)






## Step 3. Adding a check configuration

Next to the file containing the Python check codes, you will need a [file](https://github.com/minprog/cs50x/blob/2020/py/hello/.cs50.yaml) called `.cs50.yaml` that contains configuration options for the check.

    check50:
      files:
        - !exclude "*"
        - !require hello.py
      dependencies:
        - "git+https://github.com/jelleas/uva_check50.git#egg=uva.check50>=0.0.2"

What this does is two things:

- Specify which files from the current directory should be part of the check. (Why?)

